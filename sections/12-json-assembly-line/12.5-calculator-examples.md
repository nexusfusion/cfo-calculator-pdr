# 12.5 Calculator Examples

## Overview

This section provides three complete calculator JSON examples demonstrating the range of complexity supported by the JSON Assembly Line system:

1. **Simple Calculator:** Loan Payment Calculator (3 inputs, 1 calculation, 2 outputs)
2. **Moderate Complexity:** Business Loan + DSCR Calculator (5 inputs, 3 calculations, 5 outputs, tier gating)
3. **Complex Calculator:** Equipment Lease vs Buy Calculator (7 inputs, 6 calculations, 8 outputs, AI integration)

Each example includes:
- Complete JSON configuration (copy-paste ready)
- Explanation of each section
- UI wireframe description
- Notes on design decisions

---

## Example 1: Simple Loan Payment Calculator

### Overview

**Purpose:** Calculate monthly payment and total interest for a basic amortizing loan

**Complexity:** Low
- 3 inputs
- 1 calculation step
- 2 outputs (key metrics only)
- 1 warning
- No tier gating (all features available to Free users)
- No AI integration

**Business role:** Traffic magnet (SEO-optimized, high-volume usage)

**Target deployment time:** 5 minutes

---

### Complete JSON Configuration

**File:** `/calculators/configs/simple-loan-payment.json`

```json
{
  "calculator_meta": {
    "calculator_slug": "simple-loan-payment",
    "calculator_name": "Simple Loan Payment Calculator",
    "calculator_version": "1.0.0",
    "category": "financing-lending",
    "description": "Calculate monthly payments and total interest for a standard amortizing business loan.",
    "business_role": "traffic_magnet",
    "success_metric": "daily_active_users"
  },
  "inputs": [
    {
      "field_id": "loan_amount",
      "field_name": "Loan Amount",
      "field_type": "currency",
      "units": "dollars",
      "required": true,
      "default_value": null,
      "placeholder": "100000",
      "tooltip": "The total amount you are borrowing from the lender.",
      "validation": {
        "min": 1000,
        "max": 10000000,
        "must_be_positive": true
      }
    },
    {
      "field_id": "interest_rate",
      "field_name": "Annual Interest Rate",
      "field_type": "percentage",
      "units": "percent",
      "required": true,
      "default_value": 7.0,
      "placeholder": "7.0",
      "tooltip": "The annual interest rate (APR) for your loan.",
      "validation": {
        "min": 0.1,
        "max": 30,
        "must_be_positive": true
      }
    },
    {
      "field_id": "term_years",
      "field_name": "Loan Term",
      "field_type": "number",
      "units": "years",
      "required": true,
      "default_value": 10,
      "placeholder": "10",
      "tooltip": "The length of the loan in years.",
      "validation": {
        "min": 1,
        "max": 30,
        "must_be_positive": true
      }
    }
  ],
  "calculations": [
    {
      "step_id": "calc_monthly_payment",
      "formula_function": "calculateMonthlyPayment",
      "inputs": ["loan_amount", "interest_rate", "term_years"],
      "output_variable": "monthly_payment",
      "notes": "Standard amortizing loan payment formula"
    },
    {
      "step_id": "calc_term_months",
      "formula_function": "multiply",
      "inputs": ["term_years", 12],
      "output_variable": "term_months",
      "notes": "Convert years to months for total interest calculation"
    },
    {
      "step_id": "calc_total_payments",
      "formula_function": "multiply",
      "inputs": ["monthly_payment", "term_months"],
      "output_variable": "total_payments",
      "notes": "Total amount paid over loan term"
    },
    {
      "step_id": "calc_total_interest",
      "formula_function": "subtract",
      "inputs": ["total_payments", "loan_amount"],
      "output_variable": "total_interest",
      "notes": "Total interest = total payments minus principal"
    }
  ],
  "outputs": {
    "key_metrics": [
      {
        "metric_id": "monthly_payment",
        "metric_name": "Monthly Payment",
        "variable": "monthly_payment",
        "format": "currency",
        "decimals": 2,
        "tooltip": "Your estimated monthly loan payment including principal and interest."
      },
      {
        "metric_id": "total_interest",
        "metric_name": "Total Interest Paid",
        "variable": "total_interest",
        "format": "currency",
        "decimals": 2,
        "tooltip": "Total interest you will pay over the life of the loan."
      }
    ],
    "advanced_metrics": []
  },
  "warnings": [
    {
      "warning_id": "high_rate",
      "condition": "interest_rate > 12",
      "severity": "warning",
      "message": "Your interest rate is above 12%, which is relatively high for a business loan. Consider shopping around for better rates or improving your credit profile."
    }
  ],
  "tier_config": {
    "free_tier": {
      "max_scenarios": 1,
      "visible_outputs": ["monthly_payment", "total_interest"]
    },
    "pro_tier": {
      "max_scenarios": 50,
      "visible_outputs": ["monthly_payment", "total_interest"]
    },
    "ai_enabled": false
  },
  "export_config": {
    "pdf_sections": [
      {
        "section_id": "summary",
        "section_title": "Loan Payment Summary",
        "include_inputs": true,
        "include_outputs": ["monthly_payment", "total_interest"],
        "include_chart": false
      }
    ],
    "csv_columns": [
      {
        "column_id": "loan_col",
        "column_name": "Loan Amount",
        "value_source": "loan_amount"
      },
      {
        "column_id": "rate_col",
        "column_name": "Interest Rate (%)",
        "value_source": "interest_rate"
      },
      {
        "column_id": "term_col",
        "column_name": "Term (Years)",
        "value_source": "term_years"
      },
      {
        "column_id": "payment_col",
        "column_name": "Monthly Payment",
        "value_source": "monthly_payment"
      },
      {
        "column_id": "interest_col",
        "column_name": "Total Interest",
        "value_source": "total_interest"
      }
    ],
    "include_charts": false
  }
}
```

---

### UI Wireframe Description

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Simple Loan Payment Calculator                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚ INPUTS                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ Loan Amount                          [?]    â”‚    â”‚
â”‚ â”‚ [$____________] (placeholder: 100000)       â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ Annual Interest Rate                  [?]   â”‚    â”‚
â”‚ â”‚ [______%] (default: 7.0)                    â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ Loan Term                             [?]   â”‚    â”‚
â”‚ â”‚ [______] years (default: 10)                â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                     â”‚
â”‚              [ Calculate ]                          â”‚
â”‚                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ RESULTS                                            â”‚
â”‚                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ Monthly Payment                             â”‚    â”‚
â”‚ â”‚ $1,161.08                                   â”‚    â”‚
â”‚ â”‚ (Your estimated monthly loan payment)       â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ Total Interest Paid                         â”‚    â”‚
â”‚ â”‚ $39,329.60                                  â”‚    â”‚
â”‚ â”‚ (Total interest over the life of the loan)  â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                     â”‚
â”‚        [Export to PDF] [Export to CSV]              â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Golden Scenario

**File:** `/calculators/configs/simple-loan-payment.golden.json`

```json
{
  "calculator_slug": "simple-loan-payment",
  "scenarios": [
    {
      "name": "Standard 7% loan",
      "inputs": {
        "loan_amount": 100000,
        "interest_rate": 7.0,
        "term_years": 10
      },
      "expected_outputs": {
        "monthly_payment": 1161.08,
        "total_interest": 39329.60
      },
      "tolerance": 0.01
    },
    {
      "name": "High interest rate warning",
      "inputs": {
        "loan_amount": 50000,
        "interest_rate": 15.0,
        "term_years": 5
      },
      "expected_outputs": {
        "monthly_payment": 1189.29,
        "total_interest": 21357.40
      },
      "tolerance": 0.01,
      "expected_warnings": ["high_rate"]
    }
  ]
}
```

---

### Design Notes

**Why this structure?**
- **Simplicity:** Only essential inputs, no advanced features
- **SEO-optimized:** Common search term "loan payment calculator"
- **Fast calculation:** Single formula call, sub-100ms execution
- **No tier gating:** All features free to maximize traffic
- **Clear value prop:** Users immediately see monthly payment and total interest

**Target users:**
- Small business owners exploring loan options
- Founders researching financing costs
- Individuals comparing loan offers

**Expected usage:**
- 1,000+ daily active users (traffic magnet)
- Average session: 1-2 scenarios
- Primary discovery: organic search

---

## Example 2: Business Loan + DSCR Calculator (Moderate Complexity)

### Overview

**Purpose:** Calculate loan payments and Debt Service Coverage Ratio for commercial lending analysis

**Complexity:** Moderate
- 5 inputs
- 3 calculation steps
- 5 outputs (2 key metrics, 3 advanced metrics)
- 2 warnings (DSCR-based)
- Tier gating (advanced metrics behind Pro tier)
- No AI integration

**Business role:** Pro driver (advanced DSCR metric drives Pro upgrades)

**Target deployment time:** 8 minutes

---

### Complete JSON Configuration

**File:** `/calculators/configs/business-loan-dscr.json`

```json
{
  "calculator_meta": {
    "calculator_slug": "business-loan-dscr",
    "calculator_name": "Business Loan + DSCR Calculator",
    "calculator_version": "1.0.0",
    "category": "financing-lending",
    "description": "Calculate monthly loan payments and Debt Service Coverage Ratio (DSCR) to assess loan affordability for commercial lending.",
    "business_role": "pro_driver",
    "success_metric": "pro_upgrade_rate"
  },
  "inputs": [
    {
      "field_id": "loan_amount",
      "field_name": "Loan Amount",
      "field_type": "currency",
      "units": "dollars",
      "required": true,
      "default_value": null,
      "placeholder": "250000",
      "tooltip": "The total amount you are borrowing from the lender.",
      "validation": {
        "min": 10000,
        "max": 100000000,
        "must_be_positive": true
      }
    },
    {
      "field_id": "interest_rate",
      "field_name": "Annual Interest Rate",
      "field_type": "percentage",
      "units": "percent",
      "required": true,
      "default_value": 7.5,
      "placeholder": "7.5",
      "tooltip": "The annual interest rate (APR) for the loan.",
      "validation": {
        "min": 0.1,
        "max": 30,
        "must_be_positive": true
      }
    },
    {
      "field_id": "term_years",
      "field_name": "Loan Term",
      "field_type": "number",
      "units": "years",
      "required": true,
      "default_value": 10,
      "placeholder": "10",
      "tooltip": "The length of the loan in years.",
      "validation": {
        "min": 1,
        "max": 30,
        "must_be_positive": true
      }
    },
    {
      "field_id": "annual_revenue",
      "field_name": "Annual Revenue",
      "field_type": "currency",
      "units": "dollars",
      "required": true,
      "default_value": null,
      "placeholder": "1500000",
      "tooltip": "Your business's total annual revenue.",
      "validation": {
        "min": 0,
        "max": 1000000000,
        "must_be_positive": false
      }
    },
    {
      "field_id": "annual_operating_expenses",
      "field_name": "Annual Operating Expenses",
      "field_type": "currency",
      "units": "dollars",
      "required": true,
      "default_value": null,
      "placeholder": "1200000",
      "tooltip": "Your business's total annual operating expenses (excluding debt payments).",
      "validation": {
        "min": 0,
        "max": 1000000000,
        "must_be_positive": false
      }
    }
  ],
  "calculations": [
    {
      "step_id": "calc_monthly_payment",
      "formula_function": "calculateMonthlyPayment",
      "inputs": ["loan_amount", "interest_rate", "term_years"],
      "output_variable": "monthly_payment",
      "notes": "Standard loan payment calculation"
    },
    {
      "step_id": "calc_annual_debt_service",
      "formula_function": "multiply",
      "inputs": ["monthly_payment", 12],
      "output_variable": "annual_debt_service",
      "notes": "Monthly payment Ã— 12 for annual debt service"
    },
    {
      "step_id": "calc_net_operating_income",
      "formula_function": "subtract",
      "inputs": ["annual_revenue", "annual_operating_expenses"],
      "output_variable": "net_operating_income",
      "notes": "NOI = Revenue - Operating Expenses"
    },
    {
      "step_id": "calc_dscr",
      "formula_function": "calculateDSCR",
      "inputs": ["net_operating_income", "annual_debt_service"],
      "output_variable": "dscr",
      "notes": "DSCR = NOI / Annual Debt Service"
    },
    {
      "step_id": "calc_total_interest",
      "formula_function": "calculateTotalInterest",
      "inputs": ["monthly_payment", "term_years", "loan_amount"],
      "output_variable": "total_interest",
      "notes": "Total interest paid over loan term"
    }
  ],
  "outputs": {
    "key_metrics": [
      {
        "metric_id": "monthly_payment",
        "metric_name": "Monthly Payment",
        "variable": "monthly_payment",
        "format": "currency",
        "decimals": 2,
        "tooltip": "Your estimated monthly loan payment including principal and interest."
      },
      {
        "metric_id": "total_interest",
        "metric_name": "Total Interest Paid",
        "variable": "total_interest",
        "format": "currency",
        "decimals": 2,
        "tooltip": "Total interest you will pay over the life of the loan."
      }
    ],
    "advanced_metrics": [
      {
        "metric_id": "dscr",
        "metric_name": "Debt Service Coverage Ratio (DSCR)",
        "variable": "dscr",
        "format": "ratio",
        "decimals": 2,
        "tooltip": "DSCR measures your ability to cover loan payments. Lenders typically require 1.25 or higher."
      },
      {
        "metric_id": "annual_debt_service",
        "metric_name": "Annual Debt Service",
        "variable": "annual_debt_service",
        "format": "currency",
        "decimals": 2,
        "tooltip": "Total annual loan payments (monthly payment Ã— 12)."
      },
      {
        "metric_id": "net_operating_income",
        "metric_name": "Net Operating Income (NOI)",
        "variable": "net_operating_income",
        "format": "currency",
        "decimals": 2,
        "tooltip": "Your business's net operating income (revenue minus operating expenses)."
      }
    ]
  },
  "warnings": [
    {
      "warning_id": "dscr_too_low",
      "condition": "dscr < 1.25",
      "severity": "danger",
      "message": "Your DSCR is below 1.25. Most commercial lenders require a minimum DSCR of 1.25 to approve a loan. Consider reducing the loan amount, increasing revenue, or reducing operating expenses."
    },
    {
      "warning_id": "dscr_excellent",
      "condition": "dscr >= 2.0",
      "severity": "info",
      "message": "Your DSCR is excellent (2.0+). You have strong cash flow coverage for this loan and may qualify for better rates or terms."
    }
  ],
  "tier_config": {
    "free_tier": {
      "max_scenarios": 1,
      "visible_outputs": ["monthly_payment", "total_interest"]
    },
    "pro_tier": {
      "max_scenarios": 50,
      "visible_outputs": ["monthly_payment", "total_interest", "dscr", "annual_debt_service", "net_operating_income"]
    },
    "ai_enabled": false
  },
  "export_config": {
    "pdf_sections": [
      {
        "section_id": "loan_details",
        "section_title": "Loan Details",
        "include_inputs": true,
        "include_outputs": [],
        "include_chart": false
      },
      {
        "section_id": "payment_analysis",
        "section_title": "Payment Analysis",
        "include_inputs": false,
        "include_outputs": ["monthly_payment", "total_interest", "annual_debt_service"],
        "include_chart": false
      },
      {
        "section_id": "dscr_analysis",
        "section_title": "DSCR Analysis",
        "include_inputs": false,
        "include_outputs": ["dscr", "net_operating_income"],
        "include_chart": true
      }
    ],
    "csv_columns": [
      {
        "column_id": "loan_col",
        "column_name": "Loan Amount",
        "value_source": "loan_amount"
      },
      {
        "column_id": "rate_col",
        "column_name": "Interest Rate (%)",
        "value_source": "interest_rate"
      },
      {
        "column_id": "payment_col",
        "column_name": "Monthly Payment",
        "value_source": "monthly_payment"
      },
      {
        "column_id": "dscr_col",
        "column_name": "DSCR",
        "value_source": "dscr"
      },
      {
        "column_id": "noi_col",
        "column_name": "Net Operating Income",
        "value_source": "net_operating_income"
      }
    ],
    "include_charts": true
  }
}
```

---

### UI Wireframe Description (Pro Tier User)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Business Loan + DSCR Calculator                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ LOAN DETAILS                                       â”‚
â”‚ [Loan Amount: $250,000]                            â”‚
â”‚ [Interest Rate: 7.5%]                              â”‚
â”‚ [Term: 10 years]                                   â”‚
â”‚                                                     â”‚
â”‚ BUSINESS FINANCIALS                                â”‚
â”‚ [Annual Revenue: $1,500,000]                       â”‚
â”‚ [Annual Operating Expenses: $1,200,000]            â”‚
â”‚                                                     â”‚
â”‚              [ Calculate ]                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ KEY RESULTS                                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚ â”‚ Monthly Paymentâ”‚ â”‚ Total Interest   â”‚           â”‚
â”‚ â”‚ $2,958.04      â”‚ â”‚ $104,964.80      â”‚           â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                     â”‚
â”‚ ADVANCED METRICS (Pro)                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ Debt Service Coverage Ratio (DSCR)         â”‚    â”‚
â”‚ â”‚ 1.42                                       â”‚    â”‚
â”‚ â”‚ âœ“ Above minimum threshold (1.25+)          â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚ â”‚ Annual Debt     â”‚ â”‚ Net Operating     â”‚         â”‚
â”‚ â”‚ Service         â”‚ â”‚ Income (NOI)      â”‚         â”‚
â”‚ â”‚ $35,496.48      â”‚ â”‚ $300,000.00       â”‚         â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                     â”‚
â”‚ â“˜ Your DSCR is above the minimum threshold but    â”‚
â”‚    relatively tight. Consider building in a buffer.â”‚
â”‚                                                     â”‚
â”‚        [Export to PDF] [Export to CSV]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Free tier experience:**
- Advanced metrics section shows blurred placeholder
- Upgrade prompt: "Upgrade to Pro to see DSCR analysis"
- After 1 scenario saved, save button shows upgrade prompt

---

### Design Notes

**Why tier gating?**
- DSCR is a professional-grade metric used in commercial lending
- Free tier shows basic payment info (valuable for everyone)
- Pro tier unlocks DSCR analysis (critical for CFOs and lenders)
- Expected conversion: 15-20% of Free users upgrade for DSCR

**Calculation dependencies:**
1. `monthly_payment` (independent, uses loan inputs only)
2. `annual_debt_service` (depends on monthly_payment)
3. `net_operating_income` (independent, uses business financials)
4. `dscr` (depends on net_operating_income and annual_debt_service)

**Warning logic:**
- `dscr < 1.25` â†’ Red warning (loan likely won't be approved)
- `dscr >= 2.0` â†’ Blue info (excellent coverage, favorable terms)

---

## Example 3: Equipment Lease vs Buy Calculator (Complex)

### Overview

**Purpose:** Compare leasing vs buying equipment using NPV analysis and AI-generated recommendations

**Complexity:** High
- 7 inputs
- 6 calculation steps
- 8 outputs (3 key, 5 advanced)
- 3 warnings (lease expensive, buy expensive, close comparison)
- Tier gating (NPV/IRR behind Pro tier)
- AI integration (recommendation narrative)

**Business role:** AI showcase (highlights AI narrative capabilities)

**Target deployment time:** 12 minutes

---

### Complete JSON Configuration

**File:** `/calculators/configs/equipment-lease-buy.json`

```json
{
  "calculator_meta": {
    "calculator_slug": "equipment-lease-buy",
    "calculator_name": "Equipment Lease vs Buy Calculator",
    "calculator_version": "1.0.0",
    "category": "financing-lending",
    "description": "Compare the financial impact of leasing vs buying equipment using NPV analysis and AI-powered recommendations.",
    "business_role": "ai_showcase",
    "success_metric": "ai_narrative_generation_rate"
  },
  "inputs": [
    {
      "field_id": "equipment_cost",
      "field_name": "Equipment Purchase Price",
      "field_type": "currency",
      "units": "dollars",
      "required": true,
      "default_value": null,
      "placeholder": "100000",
      "tooltip": "The upfront cost to purchase the equipment outright.",
      "validation": {
        "min": 1000,
        "max": 50000000,
        "must_be_positive": true
      }
    },
    {
      "field_id": "lease_payment",
      "field_name": "Monthly Lease Payment",
      "field_type": "currency",
      "units": "dollars",
      "required": true,
      "default_value": null,
      "placeholder": "2500",
      "tooltip": "The monthly payment if you lease the equipment.",
      "validation": {
        "min": 100,
        "max": 1000000,
        "must_be_positive": true
      }
    },
    {
      "field_id": "lease_term_years",
      "field_name": "Lease Term",
      "field_type": "number",
      "units": "years",
      "required": true,
      "default_value": 5,
      "placeholder": "5",
      "tooltip": "The length of the lease agreement in years.",
      "validation": {
        "min": 1,
        "max": 20,
        "must_be_positive": true
      }
    },
    {
      "field_id": "loan_rate",
      "field_name": "Loan Interest Rate (if buying)",
      "field_type": "percentage",
      "units": "percent",
      "required": true,
      "default_value": 6.5,
      "placeholder": "6.5",
      "tooltip": "The annual interest rate if you finance the purchase with a loan.",
      "validation": {
        "min": 0,
        "max": 30,
        "must_be_positive": false
      }
    },
    {
      "field_id": "tax_rate",
      "field_name": "Corporate Tax Rate",
      "field_type": "percentage",
      "units": "percent",
      "required": true,
      "default_value": 21,
      "placeholder": "21",
      "tooltip": "Your corporate tax rate (for tax deduction calculations).",
      "validation": {
        "min": 0,
        "max": 50,
        "must_be_positive": false
      }
    },
    {
      "field_id": "residual_value",
      "field_name": "Estimated Residual Value",
      "field_type": "currency",
      "units": "dollars",
      "required": true,
      "default_value": null,
      "placeholder": "20000",
      "tooltip": "Estimated value of the equipment at the end of the lease term if you own it.",
      "validation": {
        "min": 0,
        "max": 50000000,
        "must_be_positive": false
      }
    },
    {
      "field_id": "purchase_option_price",
      "field_name": "Lease End Purchase Option Price",
      "field_type": "currency",
      "units": "dollars",
      "required": false,
      "default_value": null,
      "placeholder": "15000",
      "tooltip": "The price to purchase the equipment at the end of the lease (if applicable). Leave blank if not offered.",
      "validation": {
        "min": 0,
        "max": 50000000,
        "must_be_positive": false
      }
    }
  ],
  "calculations": [
    {
      "step_id": "calc_total_lease_cost",
      "formula_function": "multiply",
      "inputs": ["lease_payment", "lease_term_years"],
      "output_variable": "total_lease_cost",
      "notes": "Total lease payments (monthly payment Ã— term in months)"
    },
    {
      "step_id": "calc_loan_payment",
      "formula_function": "calculateMonthlyPayment",
      "inputs": ["equipment_cost", "loan_rate", "lease_term_years"],
      "output_variable": "monthly_loan_payment",
      "notes": "Monthly payment if financing purchase with loan"
    },
    {
      "step_id": "calc_total_loan_cost",
      "formula_function": "multiply",
      "inputs": ["monthly_loan_payment", "lease_term_years"],
      "output_variable": "total_loan_cost",
      "notes": "Total loan payments over term"
    },
    {
      "step_id": "calc_lease_npv",
      "formula_function": "calculateNPV",
      "inputs": ["lease_payment", "lease_term_years", "tax_rate"],
      "output_variable": "lease_npv",
      "notes": "NPV of lease payments (after-tax)"
    },
    {
      "step_id": "calc_buy_npv",
      "formula_function": "calculateNPV",
      "inputs": ["monthly_loan_payment", "lease_term_years", "tax_rate", "residual_value"],
      "output_variable": "buy_npv",
      "notes": "NPV of buying (loan payments + residual value, after-tax)"
    },
    {
      "step_id": "calc_npv_difference",
      "formula_function": "subtract",
      "inputs": ["buy_npv", "lease_npv"],
      "output_variable": "npv_difference",
      "notes": "NPV difference (positive = buying is better, negative = leasing is better)"
    }
  ],
  "outputs": {
    "key_metrics": [
      {
        "metric_id": "total_lease_cost",
        "metric_name": "Total Lease Cost",
        "variable": "total_lease_cost",
        "format": "currency",
        "decimals": 2,
        "tooltip": "Total amount you will pay over the lease term."
      },
      {
        "metric_id": "total_loan_cost",
        "metric_name": "Total Purchase Cost (Financed)",
        "variable": "total_loan_cost",
        "format": "currency",
        "decimals": 2,
        "tooltip": "Total cost to buy the equipment with a loan (including interest)."
      },
      {
        "metric_id": "npv_difference",
        "metric_name": "NPV Difference (Buy - Lease)",
        "variable": "npv_difference",
        "format": "currency",
        "decimals": 2,
        "tooltip": "Net present value difference. Positive = buying is better, negative = leasing is better."
      }
    ],
    "advanced_metrics": [
      {
        "metric_id": "monthly_loan_payment",
        "metric_name": "Monthly Loan Payment (if buying)",
        "variable": "monthly_loan_payment",
        "format": "currency",
        "decimals": 2,
        "tooltip": "Monthly payment if you finance the purchase."
      },
      {
        "metric_id": "lease_npv",
        "metric_name": "Lease NPV (After-Tax)",
        "variable": "lease_npv",
        "format": "currency",
        "decimals": 2,
        "tooltip": "Net present value of leasing (after tax deductions)."
      },
      {
        "metric_id": "buy_npv",
        "metric_name": "Buy NPV (After-Tax)",
        "variable": "buy_npv",
        "format": "currency",
        "decimals": 2,
        "tooltip": "Net present value of buying (after tax deductions and residual value)."
      },
      {
        "metric_id": "residual_value_impact",
        "metric_name": "Residual Value Impact",
        "variable": "residual_value",
        "format": "currency",
        "decimals": 2,
        "tooltip": "Estimated equipment value at end of term (only realized if you own)."
      },
      {
        "metric_id": "breakeven_residual",
        "metric_name": "Breakeven Residual Value",
        "variable": "breakeven_residual",
        "format": "currency",
        "decimals": 2,
        "tooltip": "The residual value needed for buying and leasing to have equal NPV."
      }
    ]
  },
  "warnings": [
    {
      "warning_id": "lease_expensive",
      "condition": "npv_difference > 10000",
      "severity": "warning",
      "message": "Buying appears significantly better than leasing (NPV difference > $10,000). Consider financing a purchase instead of leasing to save money over the long term."
    },
    {
      "warning_id": "buy_expensive",
      "condition": "npv_difference < -10000",
      "severity": "warning",
      "message": "Leasing appears significantly better than buying (NPV difference < -$10,000). Leasing may offer better cash flow and flexibility for your business."
    },
    {
      "warning_id": "close_comparison",
      "condition": "npv_difference >= -10000 && npv_difference <= 10000",
      "severity": "info",
      "message": "The NPV difference is relatively small (within $10,000). Consider non-financial factors like equipment obsolescence risk, maintenance responsibilities, and cash flow flexibility."
    }
  ],
  "tier_config": {
    "free_tier": {
      "max_scenarios": 1,
      "visible_outputs": ["total_lease_cost", "total_loan_cost", "npv_difference"]
    },
    "pro_tier": {
      "max_scenarios": 50,
      "visible_outputs": ["total_lease_cost", "total_loan_cost", "npv_difference", "monthly_loan_payment", "lease_npv", "buy_npv", "residual_value_impact", "breakeven_residual"]
    },
    "ai_enabled": true
  },
  "export_config": {
    "pdf_sections": [
      {
        "section_id": "equipment_details",
        "section_title": "Equipment & Financing Details",
        "include_inputs": true,
        "include_outputs": [],
        "include_chart": false
      },
      {
        "section_id": "cost_comparison",
        "section_title": "Cost Comparison",
        "include_inputs": false,
        "include_outputs": ["total_lease_cost", "total_loan_cost", "npv_difference"],
        "include_chart": true
      },
      {
        "section_id": "npv_analysis",
        "section_title": "Net Present Value Analysis",
        "include_inputs": false,
        "include_outputs": ["lease_npv", "buy_npv", "breakeven_residual"],
        "include_chart": true
      }
    ],
    "csv_columns": [
      {
        "column_id": "equipment_cost_col",
        "column_name": "Equipment Cost",
        "value_source": "equipment_cost"
      },
      {
        "column_id": "lease_payment_col",
        "column_name": "Monthly Lease Payment",
        "value_source": "lease_payment"
      },
      {
        "column_id": "total_lease_col",
        "column_name": "Total Lease Cost",
        "value_source": "total_lease_cost"
      },
      {
        "column_id": "total_buy_col",
        "column_name": "Total Buy Cost",
        "value_source": "total_loan_cost"
      },
      {
        "column_id": "npv_diff_col",
        "column_name": "NPV Difference",
        "value_source": "npv_difference"
      },
      {
        "column_id": "recommendation_col",
        "column_name": "Recommendation",
        "value_source": "ai_narrative"
      }
    ],
    "include_charts": true
  },
  "ai_config": {
    "ai_prompt_template": "You are a CFO advisor analyzing a lease vs buy decision for equipment. Based on the following inputs:\n\n- Equipment purchase price: {{equipment_cost}}\n- Monthly lease payment: {{lease_payment}}\n- Lease term: {{lease_term_years}} years\n- Loan interest rate: {{loan_rate}}%\n- Corporate tax rate: {{tax_rate}}%\n- Estimated residual value: {{residual_value}}\n\nAnd the calculated results:\n- Total lease cost: {{total_lease_cost}}\n- Total purchase cost (financed): {{total_loan_cost}}\n- NPV difference (buy - lease): {{npv_difference}}\n- Lease NPV (after-tax): {{lease_npv}}\n- Buy NPV (after-tax): {{buy_npv}}\n\nProvide a 3-paragraph analysis addressing:\n1. Financial recommendation: Should this business lease or buy? Why?\n2. Cash flow considerations: How does each option impact monthly cash flow?\n3. Strategic factors: What non-financial factors should be considered (obsolescence risk, maintenance, flexibility, tax implications)?\n\nBe specific, actionable, and professional. Use dollar amounts from the calculations.",
    "ai_response_length": 250,
    "ai_tone": "professional"
  }
}
```

---

### UI Wireframe Description (AI Tier User)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Equipment Lease vs Buy Calculator                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ EQUIPMENT DETAILS                                  â”‚
â”‚ [Equipment Purchase Price: $100,000]               â”‚
â”‚ [Monthly Lease Payment: $2,500]                    â”‚
â”‚ [Lease Term: 5 years]                              â”‚
â”‚                                                     â”‚
â”‚ FINANCING & TAX                                    â”‚
â”‚ [Loan Interest Rate: 6.5%]                         â”‚
â”‚ [Corporate Tax Rate: 21%]                          â”‚
â”‚ [Estimated Residual Value: $20,000]                â”‚
â”‚ [Purchase Option Price: $15,000] (optional)        â”‚
â”‚                                                     â”‚
â”‚              [ Calculate ]                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ COST COMPARISON                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚ â”‚ Total Lease Cost â”‚ â”‚ Total Purchase     â”‚       â”‚
â”‚ â”‚ $150,000.00      â”‚ â”‚ Cost (Financed)    â”‚       â”‚
â”‚ â”‚                  â”‚ â”‚ $154,738.20        â”‚       â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ NPV Difference (Buy - Lease)               â”‚    â”‚
â”‚ â”‚ $12,450.00                                 â”‚    â”‚
â”‚ â”‚ âœ“ Buying is better (positive NPV diff)     â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                     â”‚
â”‚ âš  Buying appears significantly better than        â”‚
â”‚   leasing (NPV difference > $10,000).              â”‚
â”‚                                                     â”‚
â”‚ ADVANCED NPV ANALYSIS (Pro)                        â”‚
â”‚ [Lease NPV, Buy NPV, Breakeven Residual shown]    â”‚
â”‚                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ ğŸ¤– AI RECOMMENDATION                        â”‚    â”‚
â”‚ â”‚                                             â”‚    â”‚
â”‚ â”‚ [ Generate AI Analysis ]                    â”‚    â”‚
â”‚ â”‚                                             â”‚    â”‚
â”‚ â”‚ (After clicking:)                           â”‚    â”‚
â”‚ â”‚ Based on your inputs, purchasing the        â”‚    â”‚
â”‚ â”‚ equipment appears financially superior      â”‚    â”‚
â”‚ â”‚ to leasing, with an NPV advantage of        â”‚    â”‚
â”‚ â”‚ $12,450. Here's why...                      â”‚    â”‚
â”‚ â”‚                                             â”‚    â”‚
â”‚ â”‚ [Full 3-paragraph AI narrative]             â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                     â”‚
â”‚        [Export to PDF] [Export to CSV]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Design Notes

**Why AI integration?**
- Lease vs buy decisions involve multiple factors beyond pure math
- AI can synthesize financial + strategic considerations
- Demonstrates value of AI tier ($20/month add-on)
- Expected AI narrative generation rate: 40-50% of AI-tier users

**Calculation complexity:**
- 6 calculation steps with dependencies
- NPV calculations require after-tax cash flow modeling
- Residual value creates asymmetry (only realized if buying)

**Tier gating strategy:**
- Free: Basic cost comparison (sufficient for simple decisions)
- Pro: Full NPV analysis (critical for CFO-grade analysis)
- AI: Strategic recommendations (helps users make final decision)

**Expected conversion funnel:**
- 1,000 Free users
- â†’ 200 upgrade to Pro (20% conversion, want NPV analysis)
- â†’ 80 add AI tier (40% of Pro users, want recommendation)

---

## Deployment Comparison

| Example | Complexity | Inputs | Calculations | Outputs | Tier Gating | AI | Deployment Time |
|---------|------------|--------|--------------|---------|-------------|----|-----------------|
| Simple Loan Payment | Low | 3 | 1 | 2 | No | No | 5 min |
| Business Loan + DSCR | Moderate | 5 | 3 | 5 | Yes | No | 8 min |
| Equipment Lease vs Buy | High | 7 | 6 | 8 | Yes | Yes | 12 min |

**Scalability:**
- **8 calculators (MVP):** ~2 hours total (all simple/moderate complexity)
- **450 calculators:** ~75 hours (~2 weeks for one developer)
- **Maintenance:** Update formula library once, all calculators benefit

---

## Summary

These three examples demonstrate the full range of calculators supported by the JSON Assembly Line:

1. **Simple:** Fast creation, high-volume traffic magnets
2. **Moderate:** Professional-grade metrics, drive Pro upgrades
3. **Complex:** Advanced analysis, showcase AI capabilities

All three follow the same JSON schema (Section 12.2), call the same formula library (Section 12.3), and deploy through the same pipeline (Section 12.4). The assembly line system enables creating all three complexity levels in 5-12 minutes each.
