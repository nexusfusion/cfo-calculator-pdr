# 4.3 Visual Language and Consistency

This section defines the visual design standards that create a cohesive, professional, and accessible experience across all calculators. Consistent visual language reinforces brand identity, reduces cognitive load, and ensures WCAG 2.1 AA compliance.

---

## 1. Color System

### Primary Brand Colors

**Primary Blue** (`#0066CC`):
- Primary action buttons (Calculate, Upgrade, Save)
- Active states (selected tabs, focused inputs)
- Links and interactive elements

**Primary Blue Variants**:
- Hover: `#0052A3` (darker)
- Active/Pressed: `#003D7A` (even darker)
- Light background: `#E6F2FF` (10% opacity for backgrounds)

**Accent Green** (`#10B981`):
- Success states (valid inputs, completed actions)
- Positive metrics (above threshold, healthy ratios)
- Checkmarks and confirmation icons

**Accent Orange** (`#F59E0B`):
- Emphasis and highlights (Pro tier badges, featured metrics)
- Call-to-action accents (upgrade prompts)

### Semantic Colors

**Info Blue** (`#3B82F6`):
- Informational messages and alerts
- Help icons and tooltips
- Background: `#DBEAFE` (light blue)

**Warning Yellow** (`#F59E0B`):
- Warning messages and cautions
- Borderline metrics (near threshold)
- Background: `#FEF3C7` (light yellow)

**Danger Red** (`#EF4444`):
- Error messages and critical alerts
- Invalid inputs, failed validations
- Critical metrics (below threshold, high risk)
- Background: `#FEE2E2` (light red)

**Success Green** (`#10B981`):
- Success messages and confirmations
- Healthy metrics (above threshold, low risk)
- Background: `#D1FAE5` (light green)

### Tier-Specific Colors

**Free Tier** (Gray):
- Badge color: `#6B7280` (gray)
- Border color for Free tier cards: `#E5E7EB`
- Muted, neutral appearance

**Pro Tier** (Blue):
- Badge color: `#0066CC` (primary blue)
- Badge background: `#E6F2FF`
- "Pro" pill badge: Blue with white text
- Border color for Pro tier cards: `#0066CC`

**AI Add-On Tier** (Purple/Gradient):
- Badge color: `#8B5CF6` (purple)
- Badge background: `#EDE9FE`
- "âœ¨ AI" badge: Purple with sparkle emoji
- Gradient accent (optional): `linear-gradient(135deg, #667EEA 0%, #764BA2 100%)`

### Neutral/Background Colors

**White** (`#FFFFFF`):
- Main background, card backgrounds

**Light Gray** (`#F9FAFB`):
- Alternate backgrounds, input backgrounds, disabled states

**Gray 200** (`#E5E7EB`):
- Borders, dividers, subtle separators

**Gray 500** (`#6B7280`):
- Secondary text, placeholder text

**Gray 900** (`#111827`):
- Primary text, headings

### Color Contrast Requirements

All color combinations must meet **WCAG 2.1 AA contrast ratios**:
- **Text on background**: 4.5:1 minimum (normal text), 3:1 minimum (large text 18px+)
- **Interactive elements**: 3:1 minimum (buttons, links)

**Tested combinations**:
- Primary Blue `#0066CC` on White `#FFFFFF`: 7.5:1 âœ“
- Gray 900 `#111827` on White `#FFFFFF`: 16.6:1 âœ“
- Danger Red `#EF4444` on White `#FFFFFF`: 4.8:1 âœ“
- Warning Yellow `#F59E0B` on White `#FFFFFF`: 2.3:1 âœ— (too low, must use darker variant or white text on yellow background)

---

## 2. Typography

### Font Families

**Sans-Serif (UI and Body Text)**:
- Primary: `Inter` (from Google Fonts or system fonts)
- Fallback: `system-ui, -apple-system, "Segoe UI", Roboto, sans-serif`

**Monospace (Numbers and Code)**:
- Primary: `"JetBrains Mono"` or `"Roboto Mono"`
- Fallback: `"Courier New", monospace`
- Used for: Financial results (dollar amounts, percentages), code snippets, technical values

**Why monospace for numbers**:
- Aligns digits vertically in tables (e.g., comparing $1,234 and $12,345)
- Professional appearance for financial data
- Easier to scan and compare

### Font Sizes and Hierarchy

**Headings**:
- **H1** (Page Title): 32px, bold (600), line-height 1.2
  - Example: "Business Loan + DSCR Calculator"
- **H2** (Section Title): 24px, bold (600), line-height 1.3
  - Example: "Key Results", "Advanced Metrics"
- **H3** (Subsection): 20px, semibold (500), line-height 1.4
  - Example: "Payment Breakdown", "Scenario Comparison"
- **H4** (Card Title): 14px, uppercase, semibold (600), letter-spacing 0.05em, line-height 1.5
  - Example: "MONTHLY PAYMENT", "DSCR"

**Body Text**:
- **Large** (Intro text): 18px, regular (400), line-height 1.6
- **Normal** (Body): 16px, regular (400), line-height 1.6
- **Small** (Labels, captions): 14px, regular (400), line-height 1.5
- **Tiny** (Footnotes, disclaimers): 12px, regular (400), line-height 1.4

**Interactive Text**:
- **Buttons**: 16px, medium (500), line-height 1.5
- **Links**: 16px, regular (400), line-height 1.6, underline on hover

**Numbers (Results)**:
- **Large metric**: 48px, bold (700), monospace, line-height 1.1
  - Example: "$4,000" (monthly payment)
- **Medium metric**: 32px, semibold (600), monospace, line-height 1.2
  - Example: "1.32" (DSCR)
- **Small metric**: 20px, medium (500), monospace, line-height 1.3
  - Example: "$240,000" (total cost in table)

### Number Formatting Rules

**Currency**:
- Format: `$X,XXX.XX` (always 2 decimals)
- Thousands separators: commas
- Examples:
  - `$4,000.00` (monthly payment)
  - `$200,000.00` (loan amount)
  - `$1,234,567.89` (large amounts)
- Large numbers: No abbreviations unless > $1M
  - `$1,234,567` â†’ `$1.23M` (only in charts or space-constrained UI)

**Percentages**:
- Format: `X.X%` (1 decimal unless precision needed)
- Examples:
  - `7.5%` (interest rate)
  - `12.25%` (if 2 decimals needed)
  - `0.5%` (small percentages)
- Special case: `< 0.1%` for very small percentages

**Ratios and Decimals**:
- Format: `X.XX` (2 decimals typical)
- Examples:
  - `1.32` (DSCR)
  - `3.50` (valuation multiple)
- Special case: `> 100` â†’ `N/A` or `âˆ` (e.g., infinite DSCR if no debt)

**Large Numbers (> $1M)**:
- In results cards: Show full number with commas (`$1,234,567`)
- In charts/tables (space-constrained): Abbreviate (`$1.23M`, `$45.6K`)
- Tooltip on hover shows full number

---

## 3. Spacing and Layout Grid

### Grid System

**Base unit**: 8px (all spacing is multiple of 8px)
- **xs**: 4px (1/2 unit, rare)
- **sm**: 8px (1 unit)
- **md**: 16px (2 units)
- **lg**: 24px (3 units)
- **xl**: 32px (4 units)
- **2xl**: 48px (6 units)

**Why 8px grid**:
- Scales cleanly to all screen sizes (8px = 0.5rem at 16px base)
- Aligns with Tailwind CSS spacing scale
- Industry standard (Material Design, Bootstrap, etc.)

### Padding and Margin Standards

**Component padding** (internal spacing):
- **Input fields**: 12px vertical, 16px horizontal
- **Buttons**: 12px vertical, 24px horizontal
- **Cards**: 24px all sides (desktop), 16px (mobile)
- **Modals**: 32px all sides (desktop), 16px (mobile)

**Component margins** (external spacing):
- **Between input fields**: 16px vertical
- **Between cards**: 24px vertical
- **Between sections**: 48px vertical
- **Between metric cards**: 16px horizontal (in grid)

### Component Spacing Rules

**Input form**:
```
Label                    â† 0px (label sits directly above input)
[Input field]
                         â† 16px margin to next input
Label
[Input field]
```

**Results cards**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  16px  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Card 1      â”‚ â†â†’     â”‚  Card 2      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†• 24px margin
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  16px  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Card 3      â”‚ â†â†’     â”‚  Card 4      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Icons and Visual Elements

### Icon Library

**Icon set**: Heroicons (MIT license, matches Tailwind CSS ecosystem)
- Outline icons (default): 24px, 1.5px stroke
- Solid icons (emphasis): 24px, filled

**Common icons**:
- **Lock** (`ğŸ”’` or Heroicons `LockClosedIcon`): Locked features, Pro tier required
- **Info** (`â„¹ï¸` or `InformationCircleIcon`): Tooltips, help text, info alerts
- **Warning** (`âš ï¸` or `ExclamationTriangleIcon`): Warning alerts, cautions
- **Danger** (`ğŸš¨` or `ExclamationCircleIcon`): Critical alerts, errors
- **Check** (`âœ“` or `CheckCircleIcon`): Success states, completed actions
- **Sparkle** (`âœ¨` or `SparklesIcon`): AI features, AI add-on
- **Download** (`ArrowDownTrayIcon`): Export buttons
- **Share** (`ShareIcon`): Share buttons
- **Plus** (`PlusIcon`): Add scenario, create new
- **Trash** (`TrashIcon`): Delete scenario

**Icon sizing**:
- **Small**: 16px (inline with text)
- **Medium**: 24px (default, buttons, cards)
- **Large**: 32px (headings, empty states)

### Status Indicators

**Badge (tier indicator)**:
```
Pro    â† Blue background (#0066CC), white text, rounded corners
```
- Padding: 4px horizontal, 2px vertical
- Font: 12px, semibold, uppercase
- Border radius: 4px

**Dot indicator** (status):
```
â— Online   â† Green dot (#10B981)
â— Pending  â† Yellow dot (#F59E0B)
â— Offline  â† Gray dot (#6B7280)
```
- Size: 8px diameter
- Placement: Left of text, vertically centered

**Checkmark** (completed):
```
âœ“ Valid input   â† Green checkmark (#10B981)
```
- Size: 16-20px
- Placement: Right of input field or inline with text

### Chart Styles

**Color palette for charts** (colorblind-safe):
1. **Blue** `#0066CC`
2. **Green** `#10B981`
3. **Orange** `#F59E0B`
4. **Purple** `#8B5CF6`
5. **Red** `#EF4444`
6. **Teal** `#14B8A6`

**Chart design standards**:
- **Background**: White `#FFFFFF`
- **Grid lines**: Light gray `#E5E7EB`, 1px, dashed
- **Axes**: Gray 900 `#111827`, 1px solid
- **Axis labels**: 14px, Gray 500 `#6B7280`
- **Data labels**: 12px, Gray 900 `#111827`, bold
- **Legend**: Below chart (desktop), icons match chart colors
- **Tooltips**: Dark background `#111827`, white text, rounded corners

**Chart types**:
- **Bar chart**: Vertical bars, 24px width, 8px gap
- **Line chart**: 2px line, 6px dot markers
- **Pie chart**: 2px white border between slices, labels outside with leader lines

---

## 5. Accessibility Standards

### WCAG 2.1 AA Compliance

**Contrast minimums**:
- **Normal text** (< 18px): 4.5:1 contrast ratio
- **Large text** (â‰¥ 18px or â‰¥ 14px bold): 3:1 contrast ratio
- **Interactive elements** (buttons, links): 3:1 contrast ratio

**Color usage**:
- **Never rely on color alone**: Use icons, labels, patterns in addition to color
  - Example: Error state = red border + warning icon + error text (not just red border)
- **Colorblind-safe palettes**: Avoid red/green combinations, use blue/orange or other distinguishable pairs

### Keyboard Navigation

**Tab order**:
1. Skip to main content link (invisible until focused)
2. Input fields (top to bottom, left to right)
3. Calculate button
4. Scenario tabs
5. Results panel (focusable cards)
6. Action buttons (Export, AI, Share)

**Focus indicators**:
- **Visible outline**: 2px solid Primary Blue `#0066CC`, 2px offset
- **No removal of focus outline**: Never use `outline: none` without alternative indicator

**Keyboard shortcuts** (optional Phase 2+):
- `Tab`: Next field
- `Shift+Tab`: Previous field
- `Enter`: Submit form (Calculate)
- `Escape`: Close modal

### Screen Reader Support

**ARIA labels**:
```html
<button aria-label="Export calculation results as PDF">
  Export PDF
</button>

<input type="number"
       aria-label="Loan amount in dollars"
       aria-describedby="loan-amount-help">
<div id="loan-amount-help">Total amount borrowed from lender</div>
```

**ARIA roles**:
- `role="alert"` for error messages (screen reader announces immediately)
- `role="status"` for loading states (screen reader announces politely)
- `role="region"` for landmark sections (inputs, results, warnings)

**ARIA live regions**:
```html
<div role="status" aria-live="polite" aria-atomic="true">
  Calculating results...
</div>
```
- **Polite**: Calculation in progress, export generating (don't interrupt)
- **Assertive**: Error occurred, critical warning (interrupt current announcement)

**Alt text for icons**:
- Decorative icons: `aria-hidden="true"` (screen reader ignores)
- Functional icons: `aria-label` describing action (e.g., `aria-label="Information about loan amount"`)

### Focus Management

**Modal open**:
- Trap focus inside modal (Tab cycles through modal elements only)
- Focus first interactive element (e.g., input field or "Close" button)

**Modal close**:
- Return focus to element that triggered modal (e.g., "Add Scenario" button)

**Loading states**:
- Announce to screen reader: "Calculating results" (using `aria-live="polite"`)
- Disable inputs during calculation (prevent changes mid-calculation)

---

## Component Examples with Visual Standards

### Primary Button

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Calculate        â”‚  â† Primary Blue (#0066CC) background
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     White text, 16px medium
                           12px vertical, 24px horizontal padding
                           8px border radius

Hover: #0052A3 background
Active: #003D7A background
Disabled: #E5E7EB background, #6B7280 text
```

### Result Card (Key Metric)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MONTHLY PAYMENT             â”‚  â† Gray 500 (#6B7280), 14px uppercase
â”‚  $4,000                      â”‚  â† Gray 900 (#111827), 48px bold monospace
â”‚                              â”‚
â”‚  24px padding all sides      â”‚
â”‚  Light gray background       â”‚
â”‚  2px border radius           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Warning Alert

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš ï¸  WARNING                 â”‚  â† 4px yellow left border
â”‚  Your DSCR is 1.18, below    â”‚     Yellow background (#FEF3C7)
â”‚  the typical lender          â”‚     Gray 900 text
â”‚  threshold of 1.25.          â”‚     16px padding
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Summary

This visual language ensures all calculators are:
- **Consistent**: Same colors, typography, spacing across all calculators
- **Professional**: Clean, modern design that CFOs and finance leaders expect
- **Accessible**: WCAG 2.1 AA compliant, keyboard navigable, screen reader friendly
- **Scalable**: Design system documented in Tailwind config, reusable across calculators

Developers and designers reference this section when building calculator UIs, ensuring every calculator feels like part of the same cohesive suite.
