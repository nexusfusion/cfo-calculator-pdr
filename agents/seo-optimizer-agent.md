# SEO Optimizer Agent

## Purpose
Automatically generate SEO-optimized content for calculator pages including meta tags, structured data, and on-page SEO elements to maximize organic search visibility.

## Input
- Calculator JSON config (meta, description, category)
- Calculator documentation (generated by Calculator Doc Generator Agent)
- Target keywords (optional, or auto-extracted from calculator purpose)
- Competitor analysis data (optional)

## Process

### Step 1: Extract Calculator Metadata
From JSON config:
- calculator_name: "Business Loan + DSCR Calculator"
- description: Brief description of calculator
- category: "financing-lending"
- business_role: "traffic_magnet" (important for SEO priority)

### Step 2: Generate Primary Keywords

#### 2a. Extract Core Keywords
From calculator name and description:
- Primary: "business loan calculator", "DSCR calculator"
- Secondary: "debt service coverage ratio calculator", "loan payment calculator"
- Long-tail: "calculate business loan payments", "business loan DSCR calculator online"

#### 2b. Research Search Volume (if API available)
- Use keyword research API (e.g., SEMrush, Ahrefs API)
- Prioritize keywords by:
  - Search volume (higher is better)
  - Competition (lower is better for new calculators)
  - Intent match (calculator, tool, vs information queries)

#### 2c. Identify Keyword Variations
- Plural/singular: "loan calculator" vs "loan calculators"
- Synonyms: "business loan" vs "commercial loan" vs "small business loan"
- Related terms: "SBA loan", "term loan", "business financing"
- Question formats: "how to calculate DSCR", "what is a good DSCR"

### Step 3: Generate Page Title (Title Tag)

#### 3a. Title Formula
```
[Primary Keyword] | [Benefit/Feature] | [Brand]
```

#### 3b. Title Variations (Choose Best)
Option 1: Direct and keyword-rich
```
Business Loan Calculator with DSCR Analysis | Free Tool | SmartProfit
```

Option 2: Benefit-focused
```
Calculate Loan Payments & DSCR Instantly | Business Loan Calculator
```

Option 3: Question format
```
How Much Can Your Business Borrow? | Business Loan & DSCR Calculator
```

#### 3c. Title Optimization Rules
- Length: 50-60 characters (to avoid truncation in search results)
- Primary keyword in first 50% of title
- Brand name at end (if space allows)
- Compelling and click-worthy
- No keyword stuffing

**Selected Title:**
```html
<title>Business Loan Calculator with DSCR Analysis | Free Tool</title>
```

### Step 4: Generate Meta Description

#### 4a. Meta Description Formula
```
[Action verb] + [Primary benefit] + [Secondary benefit] + [Call to action]
```

#### 4b. Meta Description Content
```
Calculate monthly loan payments and Debt Service Coverage Ratio (DSCR) for business loans. Free tool helps you determine loan affordability and assess cash flow. Compare multiple scenarios. Get instant results.
```

#### 4c. Meta Description Optimization Rules
- Length: 150-160 characters (optimal for display)
- Include primary keyword naturally
- Action-oriented (starts with verb: Calculate, Analyze, Compare)
- Include benefit or unique value proposition
- Call to action if space allows ("Try it free", "Get instant results")
- No truncation mid-sentence

**Generated Meta Description:**
```html
<meta name="description" content="Calculate monthly loan payments and Debt Service Coverage Ratio (DSCR) for business loans. Free tool with instant results. Compare multiple scenarios and assess loan affordability." />
```

### Step 5: Generate Structured Data (Schema.org)

#### 5a. SoftwareApplication Schema
```json
{
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "Business Loan + DSCR Calculator",
  "applicationCategory": "FinanceApplication",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "operatingSystem": "Web Browser",
  "description": "Calculate monthly loan payments and Debt Service Coverage Ratio (DSCR) for business loans. Free online calculator with instant results.",
  "featureList": [
    "Loan payment calculation",
    "DSCR analysis",
    "Multiple scenario comparison",
    "PDF export",
    "AI-powered insights"
  ],
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "4.8",
    "ratingCount": "127"
  },
  "provider": {
    "@type": "Organization",
    "name": "SmartProfit",
    "url": "https://smartprofit.com"
  }
}
```

#### 5b. HowTo Schema (for calculator usage)
```json
{
  "@context": "https://schema.org",
  "@type": "HowTo",
  "name": "How to Calculate Business Loan Payments and DSCR",
  "description": "Step-by-step guide to using the Business Loan Calculator",
  "step": [
    {
      "@type": "HowToStep",
      "position": 1,
      "name": "Enter Loan Amount",
      "text": "Input the total amount you want to borrow"
    },
    {
      "@type": "HowToStep",
      "position": 2,
      "name": "Enter Interest Rate",
      "text": "Input the annual interest rate offered by the lender"
    },
    {
      "@type": "HowToStep",
      "position": 3,
      "name": "Enter Loan Term",
      "text": "Input the number of years to repay the loan"
    },
    {
      "@type": "HowToStep",
      "position": 4,
      "name": "Enter Revenue and Expenses",
      "text": "Input your annual revenue and operating expenses"
    },
    {
      "@type": "HowToStep",
      "position": 5,
      "name": "Calculate",
      "text": "Click Calculate to see your monthly payment and DSCR"
    }
  ]
}
```

#### 5c. FAQPage Schema
```json
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What is a good DSCR for a business loan?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Most lenders require a minimum DSCR of 1.25, meaning your business should generate $1.25 in operating income for every $1 in debt payments. A DSCR of 1.50 or higher is considered strong."
      }
    },
    {
      "@type": "Question",
      "name": "How is DSCR calculated?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "DSCR is calculated by dividing Net Operating Income (NOI) by Annual Debt Service. For example, if your business has $300,000 in NOI and $200,000 in annual debt payments, your DSCR is 1.50."
      }
    }
  ]
}
```

### Step 6: Generate Open Graph Tags (Social Sharing)
```html
<meta property="og:title" content="Business Loan Calculator with DSCR Analysis | Free Tool" />
<meta property="og:description" content="Calculate monthly loan payments and Debt Service Coverage Ratio for business loans. Free instant results." />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://smartprofit.com/calculators/business-loan-dscr" />
<meta property="og:image" content="https://smartprofit.com/images/calculators/business-loan-dscr-og.jpg" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:site_name" content="SmartProfit" />

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Business Loan Calculator with DSCR Analysis" />
<meta name="twitter:description" content="Calculate loan payments and DSCR for business loans. Free instant results." />
<meta name="twitter:image" content="https://smartprofit.com/images/calculators/business-loan-dscr-twitter.jpg" />
<meta name="twitter:site" content="@smartprofit" />
```

### Step 7: Generate On-Page SEO Content

#### 7a. H1 Heading (Page Title)
```html
<h1>Business Loan Calculator with DSCR Analysis</h1>
```

Rules:
- Only one H1 per page
- Includes primary keyword
- Clear and descriptive
- 20-70 characters

#### 7b. H2 Subheadings (Structure)
```html
<h2>Calculate Your Business Loan Payment</h2>
<h2>What is Debt Service Coverage Ratio (DSCR)?</h2>
<h2>How to Use This Calculator</h2>
<h2>Understanding Your Results</h2>
<h2>Frequently Asked Questions</h2>
```

Rules:
- Includes related keywords naturally
- Structures content for readability
- Answers user questions
- Supports featured snippet targeting

#### 7c. Introductory Paragraph (Above the Fold)
```html
<p>
Calculate your business loan monthly payment and analyze your Debt Service Coverage Ratio (DSCR) 
with our free online calculator. Determine loan affordability, assess cash flow capacity, and 
understand whether your business qualifies for financing. Get instant results and compare multiple 
loan scenarios side-by-side.
</p>
```

Rules:
- 100-150 words
- Primary keyword in first sentence
- Secondary keywords naturally included
- Clear value proposition
- Action-oriented

#### 7d. Educational Content Section
```html
<h2>What is Debt Service Coverage Ratio (DSCR)?</h2>
<p>
Debt Service Coverage Ratio (DSCR) is a financial metric that lenders use to evaluate whether 
a business generates sufficient cash flow to cover its debt obligations. DSCR is calculated by 
dividing your Net Operating Income (NOI) by your Annual Debt Service.
</p>

<p>
<strong>DSCR Formula:</strong> DSCR = Net Operating Income / Annual Debt Service
</p>

<h3>DSCR Benchmarks</h3>
<ul>
  <li><strong>DSCR ≥ 1.50:</strong> Strong cash flow, favorable for lenders</li>
  <li><strong>DSCR 1.25-1.49:</strong> Acceptable, meets most lender minimums</li>
  <li><strong>DSCR 1.10-1.24:</strong> Marginal, may require additional collateral</li>
  <li><strong>DSCR < 1.10:</strong> High risk, likely loan denial</li>
</ul>
```

Rules:
- Answers "what is" queries for featured snippets
- Uses simple, clear language
- Includes examples
- Supports long-tail keyword targeting

### Step 8: Generate Internal Linking Strategy

#### 8a. Identify Related Calculators
```
Related calculators for internal links:
- SBA 7(a) Loan Analyzer
- Equipment Lease vs Buy Calculator
- Cash Runway Calculator
- Business Valuation Calculator
```

#### 8b. Generate Contextual Internal Links
```html
<p>
For SBA-specific loans with guarantee fees, use our 
<a href="/calculators/sba-7a-analyzer">SBA 7(a) Loan Analyzer</a> to calculate 
effective APR including all fees.
</p>

<p>
After calculating your loan payment, check how it affects your 
<a href="/calculators/cash-runway">cash runway and burn rate</a> to ensure 
adequate working capital.
</p>
```

Rules:
- Link to 2-4 related calculators
- Use descriptive anchor text (not "click here")
- Links are contextually relevant
- Opens in same window (internal links)

### Step 9: Generate URL Slug

#### 9a. URL Structure
```
https://smartprofit.com/calculators/business-loan-dscr
```

Rules:
- Lowercase only
- Hyphens separate words (not underscores)
- Includes primary keyword
- Short and descriptive
- No unnecessary words (the, a, an)
- Canonical version (no trailing slash unless directory)

#### 9b. Canonical Tag
```html
<link rel="canonical" href="https://smartprofit.com/calculators/business-loan-dscr" />
```

### Step 10: Generate Breadcrumb Navigation
```html
<nav aria-label="Breadcrumb">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a itemprop="item" href="https://smartprofit.com">
        <span itemprop="name">Home</span>
      </a>
      <meta itemprop="position" content="1" />
    </li>
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a itemprop="item" href="https://smartprofit.com/calculators">
        <span itemprop="name">Calculators</span>
      </a>
      <meta itemprop="position" content="2" />
    </li>
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <a itemprop="item" href="https://smartprofit.com/calculators/financing-lending">
        <span itemprop="name">Financing & Lending</span>
      </a>
      <meta itemprop="position" content="3" />
    </li>
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
      <span itemprop="name">Business Loan Calculator</span>
      <meta itemprop="position" content="4" />
    </li>
  </ol>
</nav>
```

### Step 11: Generate Alt Text for Images

For calculator screenshots, diagrams, or UI elements:
```html
<img 
  src="/images/business-loan-calculator-screenshot.jpg" 
  alt="Business loan calculator showing monthly payment of $2,958 and DSCR of 1.42 for a $250,000 loan at 7.5% over 10 years"
  width="800"
  height="600"
/>
```

Rules:
- Descriptive, includes context
- Includes keywords naturally (not stuffed)
- Describes what's in the image
- 100-125 characters

### Step 12: Generate Meta Keywords (Legacy, Optional)
```html
<meta name="keywords" content="business loan calculator, DSCR calculator, debt service coverage ratio, loan payment calculator, business loan payment, commercial loan calculator, SBA loan calculator" />
```

Note: Meta keywords are largely ignored by Google but may be used by other search engines.

### Step 13: Generate Mobile Optimization Tags
```html
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="theme-color" content="#0066CC" />
```

### Step 14: Generate Sitemap Entry
```xml
<url>
  <loc>https://smartprofit.com/calculators/business-loan-dscr</loc>
  <lastmod>2025-11-18</lastmod>
  <changefreq>monthly</changefreq>
  <priority>0.8</priority>
  <image:image>
    <image:loc>https://smartprofit.com/images/calculators/business-loan-dscr-og.jpg</image:loc>
    <image:title>Business Loan Calculator Screenshot</image:title>
  </image:image>
</url>
```

Priority guidelines:
- Homepage: 1.0
- Category pages: 0.8
- High-value calculators (traffic magnets): 0.8
- Standard calculators: 0.6
- Documentation pages: 0.4

### Step 15: Generate Robots Meta Tag
```html
<meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
```

Options:
- `index, follow`: Standard for all public calculators
- `noindex, nofollow`: For internal/draft calculators
- `index, nofollow`: For user-generated content pages

## Output

### SEO Package File:
`output/seo/business-loan-dscr-seo.json`
```json
{
  "calculator_slug": "business-loan-dscr",
  "page_url": "https://smartprofit.com/calculators/business-loan-dscr",
  "title_tag": "Business Loan Calculator with DSCR Analysis | Free Tool",
  "meta_description": "Calculate monthly loan payments and Debt Service Coverage Ratio (DSCR) for business loans. Free tool with instant results. Compare multiple scenarios and assess loan affordability.",
  "primary_keywords": [
    "business loan calculator",
    "DSCR calculator",
    "debt service coverage ratio calculator"
  ],
  "secondary_keywords": [
    "loan payment calculator",
    "business loan payment",
    "commercial loan calculator"
  ],
  "h1": "Business Loan Calculator with DSCR Analysis",
  "structured_data": {
    "software_application": {...},
    "how_to": {...},
    "faq": {...}
  },
  "open_graph": {...},
  "twitter_card": {...},
  "canonical_url": "https://smartprofit.com/calculators/business-loan-dscr",
  "sitemap_priority": 0.8,
  "internal_links": [
    {"text": "SBA 7(a) Loan Analyzer", "url": "/calculators/sba-7a-analyzer"},
    {"text": "cash runway and burn rate", "url": "/calculators/cash-runway"}
  ],
  "estimated_search_volume": 4400,
  "keyword_difficulty": 42,
  "last_updated": "2025-11-18"
}
```

### HTML Head Section:
`output/seo/business-loan-dscr-head.html`

Contains all meta tags, structured data, and SEO elements ready to insert into page `<head>`.

### Success Message:
```
✅ SEO Optimization Complete

Calculator: business-loan-dscr
Page: https://smartprofit.com/calculators/business-loan-dscr

Generated Elements:
✓ Title tag (58 characters)
✓ Meta description (157 characters)
✓ Structured data (3 schemas: SoftwareApplication, HowTo, FAQ)
✓ Open Graph tags (7 tags)
✓ Twitter Card tags (4 tags)
✓ H1 and H2 headings (5 subheadings)
✓ Introductory paragraph (142 words)
✓ Internal links (3 related calculators)
✓ Breadcrumb navigation with schema
✓ Image alt text guidance
✓ Sitemap entry
✓ Canonical tag

Primary Keyword: "business loan calculator"
Estimated Monthly Searches: 4,400
Keyword Difficulty: 42/100 (Medium)

SEO Score: 95/100
- Title optimization: ✓
- Meta description: ✓
- Structured data: ✓
- Mobile optimization: ✓
- Internal linking: ✓
- Content quality: ✓

Next Steps:
1. Insert head.html into calculator page template
2. Add internal links to related calculators
3. Submit updated sitemap to Google Search Console
4. Monitor rankings and traffic in 2-4 weeks
```

## Success Criteria
- Title tag 50-60 characters
- Meta description 150-160 characters
- All structured data validates (schema.org validator)
- Primary keyword in title, H1, meta description, first paragraph
- At least 2 internal links to related calculators
- Mobile optimization tags present
- Passes SEO audit tools (90+ score)

## Quality Checks
- Run through Google Rich Results Test (structured data valid)
- Run through PageSpeed Insights (Core Web Vitals)
- Check mobile-friendliness (Google Mobile-Friendly Test)
- Validate meta tags (no truncation in search results)
- Check for keyword stuffing (natural language)

## Usage Example
```bash
# Generate SEO for one calculator
claude-code "Use seo-optimizer-agent to generate SEO content for business-loan-dscr calculator"

# Regenerate SEO for all calculators (after keyword research update)
claude-code "Use seo-optimizer-agent to regenerate SEO for all calculators with updated keywords"

# Update SEO after calculator change
claude-code "Use seo-optimizer-agent to update SEO for business-loan-dscr calculator version 2.2.0"
```

## Dependencies
- Section 2.1: Calculator categories (for breadcrumbs)
- Section 7.2: Analytics (for tracking SEO performance)
- Calculator Doc Generator Agent: for FAQ content
- Calculator JSON config: for metadata